[tool]
cmd = ["python3", "-m", "btrfs_to_s3"]
config_flag = "--config"

[paths]
run_dir = "integration_tests/run"
logs_dir = "integration_tests/run/logs"
scratch_dir = "integration_tests/run/scratch"
lock_dir = "integration_tests/run/lock"
btrfs_image = "integration_tests/run/btrfs.img"
mount_dir = "integration_tests/run/mnt"
data_dir = "integration_tests/run/mnt/data"
snapshots_dir = "integration_tests/run/mnt/snapshots"

[btrfs]
loopback_size_gib = 4
mount_options = "compress=zstd"
subvolumes = ["data", "root", "home"]

[aws]
region = "us-east-1"
bucket = "codex-btrfs-test-bucket"
prefix = "btrfs-to-s3-test/"
storage_class = "STANDARD"
sse = "AES256"

[backup]
chunk_size_mib = 64
concurrency = 4
retention_snapshots = 2

[global]
spool_size_bytes = 134217728

[s3]
spool_enabled = true
