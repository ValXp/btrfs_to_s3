Learnings
- FYI: `testing/config/test.env` is a tracked template even though `testing/.gitignore` ignores it, so edit with care to avoid committing secrets.
- FYI: `testing/harness/env.py` only accepts `KEY=VALUE` lines (optional `export`) and will raise on invalid entries; inline comments are treated as part of the value.
- FYI: `python` is not available in the current shell; use `python3` when running harness commands.
- FYI: `rg` is not installed in this environment; use `find`/`grep` as fallback.
- FYI: `pytest` is not available in this environment, so a minimal local `pytest` shim runs `unittest` discovery for `python3 -m pytest`.
- FYI: `testing/scripts/setup_btrfs.py` currently fails because `losetup` is missing in the environment.
- FYI: The harness now generates a tool config at testing/run/tool_config.toml and exports BTRFS_TO_S3_HARNESS_RUN_DIR when running the CLI.
- FYI: AWS uploads require credentials; this environment needed python3-boto3 installed via apt (pip is blocked by PEP 668).
- FYI: The integration harness requires sudo for loopback/mount operations (run with sudo -n when possible).
- FYI: Config now includes a restore section; direct Config construction must supply RestoreConfig.
- FYI: Restore verification uses the manifest snapshot path as its source reference and fails if that path is missing.
